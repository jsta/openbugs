<!DOCTYPE html PUBLIC "-//W3C//DTD Html 1.0 Strict//EN" "http://www.w3.org/TR/Html1/DTD/strict.dtd"><html><head><title>CBugs</title></head><body><p><font face="Arial" color="#008040" size="3">/*<img src="cbugs0.bmp" alt="[cbugs0]">&nbsp;&nbsp;&nbsp;GNU General Public Licence<br><br>&nbsp;&nbsp;&nbsp;This small C program loads the LibOpenBUGS.so ELF shared library and calls the <br>&nbsp;&nbsp;&nbsp;CLI function. Save it as a .c file and then compile it on Linux using <br>&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gcc -o bugs OpenBUGS.c -ldl <br>&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;This code should work on a Windows machine if brugs.so is repaced by LibOpenBUGS.dll<br>&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;A ascii version of this file is in Developer/OpenBUGS.c<br><br>*/<br><br></font><font face="Arial" color="#000100" size="3">#include &lt;dlfcn.h&gt;<br>#include &lt;stdio.h&gt;<br>#include &lt;string.h&gt;<br><br>int </font><font face="Arial" color="#804000" size="3"><strong>main </strong></font><font face="Arial" color="#000100" size="3">(int argc, char **argv)<br>{<br>&nbsp;&nbsp;&nbsp;void * handle;<br>void (*cli)(void);<br><br>handle = dlopen(&quot;./LibOpenBUGS.so&quot;, RTLD_LAZY);<br>if (!handle)<br>return 1;<br><br>* (void **) (&amp;cli) = dlsym(handle, &quot;CLI&quot;);<br>(*cli)();<br>dlclose(handle);<br><br>return 0;<br>&nbsp;&nbsp;&nbsp;<br>}<br><br><br></font><font face="Arial" color="#008040" size="3">/*<br><br>&nbsp;&nbsp;&nbsp;As an alternative to using dlopen to load the OpenBUGS library Nathan Coulter has <br>&nbsp;&nbsp;&nbsp;developed the following short C program. Compile it on Linux using <br>&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font face="Arial" color="#008000" size="3">gcc -o bin/OpenBUGS -L ./lib -Wl,-rpath,\$ORIGIN/../lib src/OpenBUGSCli.c -l OpenBUGS</font><font face="Arial" color="#008040" size="3"><br>&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;</font><font face="Arial" color="#000000" size="3">#include &lt;OpenBUGS.h&gt;<br><br></font><font face="Arial" color="#000000" size="1">&nbsp;&nbsp;&nbsp;</font><font face="Arial" color="#000000" size="3">int </font><font face="Arial" color="#804000" size="3"><strong>main</strong></font><font face="Arial" color="#000000" size="3"> ()<br></font><font face="Arial" color="#000000" size="1">&nbsp;&nbsp;&nbsp;</font><font face="Arial" color="#000000" size="3">{<br></font><font face="Arial" color="#000000" size="1">&nbsp;&nbsp;&nbsp;</font><font face="Arial" color="#000000" size="3">&nbsp;&nbsp;&nbsp;CLI();<br></font><font face="Arial" color="#000000" size="1">&nbsp;&nbsp;&nbsp;</font><font face="Arial" color="#000000" size="3">}</font><font face="Arial" color="#008040" size="3"><br><br>*/<br><br><br>/*<br><br>&nbsp;&nbsp;&nbsp;This is equivalent to the component Pascal program<br>&nbsp;&nbsp;&nbsp;<br></font><font face="Arial" color="#000100" size="1">&nbsp;&nbsp;&nbsp;</font><font face="Arial" color="#000100" size="2">MODULE BugsClassic;<br><br></font><font face="Arial" color="#000100" size="1">&nbsp;&nbsp;&nbsp;</font><font face="Arial" color="#000100" size="2">&nbsp;&nbsp;&nbsp;IMPORT BugsBRugs;<br><br></font><font face="Arial" color="#000100" size="1">&nbsp;&nbsp;&nbsp;</font><font face="Arial" color="#000100" size="2">BEGIN<br></font><font face="Arial" color="#000100" size="1">&nbsp;&nbsp;&nbsp;</font><font face="Arial" color="#000100" size="2">&nbsp;&nbsp;&nbsp;BugsBRugs.CLI<br></font><font face="Arial" color="#000100" size="1">&nbsp;&nbsp;&nbsp;</font><font face="Arial" color="#000100" size="2">END BugsClassic.<br></font><font face="Arial" color="#008040" size="3">&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;(*&nbsp;&nbsp;&nbsp;</font><font face="Arial" color="#000000" size="3"><img src="cbugs1.bmp" alt="[cbugs1]">DevLinker.Link dos classicbugs.exe := BugsClassic$ 1 Bugslogo.ico <img src="cbugs2.bmp" alt="[cbugs2]">&nbsp;&nbsp;&nbsp;</font><font face="Arial" color="#008040" size="3">*)<br>&nbsp;&nbsp;&nbsp;</font><font face="Arial" color="#000100" size="3"><br></font><font face="Arial" color="#008040" size="3">'/</font><font face="Arial" color="#000100" size="3"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></font><font face="Arial" color="#000100" size="2"><br></font><font face="Arial" color="#000100" size="1"><br></font></p></body></html>